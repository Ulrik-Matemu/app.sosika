importScripts("https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js");importScripts("https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js");firebase.initializeApp({apiKey:"AIzaSyA_Jw-BGThGsqhB8_t5_AH6D9AL1YLCjK8",authDomain:"sosika-101.firebaseapp.com",projectId:"sosika-101",storageBucket:"sosika-101.firebasestorage.app",messagingSenderId:"827695672687",appId:"1:827695672687:web:85ce347456339ccfd80c9a",measurementId:"G-692C6RSH31"});const c=firebase.messaging();c.onBackgroundMessage(t=>{var o,i;console.log("[firebase-sw.js] Received background message ",t);const e=((o=t.notification)==null?void 0:o.title)||"New Notification",s={body:((i=t.notification)==null?void 0:i.body)||"",icon:"/sosika.png",data:t.data};return self.registration.showNotification(e,s)});self.addEventListener("install",t=>{self.skipWaiting()});self.addEventListener("activate",t=>{t.waitUntil(self.clients.claim())});self.addEventListener("notificationclick",t=>{var s;console.log("[firebase-sw.js] Notification clicked",t),t.notification.close();const e=((s=t.notification.data)==null?void 0:s.url)||"/";t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(o=>{for(let i=0;i<o.length;i++){const n=o[i];if(n.url===e&&"focus"in n)return n.focus()}return clients.openWindow(e)}))});self.addEventListener("push",t=>{var e,s,o;if(console.log("[firebase-sw.js] Push received",t),!!t.data)try{const i=t.data.json(),n=((e=i.notification)==null?void 0:e.title)||"New Message",a={body:((s=i.notification)==null?void 0:s.body)||"",icon:((o=i.notification)==null?void 0:o.icon)||"/sosika.png",data:i.data||i};t.waitUntil(self.registration.showNotification(n,a))}catch(i){console.error("[firebase-sw.js] Error showing notification",i)}});self.addEventListener("fetch",t=>{t.request.destination==="document"?t.respondWith(caches.open("html-cache").then(e=>fetch(t.request).then(s=>(e.put(t.request,s.clone()),s)).catch(()=>e.match(t.request)))):["style","script","worker"].includes(t.request.destination)&&t.respondWith(caches.open("assets-cache").then(e=>e.match(t.request).then(s=>s||fetch(t.request).then(o=>(e.put(t.request,o.clone()),o)))))});
